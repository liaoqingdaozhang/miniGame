(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-vrShow-mobile"],{"0736":function(t,e,i){"use strict";var a=i("b782"),o=i.n(a);o.a},5979:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{},[i("v-uni-view",{staticClass:"tool",style:{height:t.windowHeight},nativeOn:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),function(){}.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"tool_top"}),i("v-uni-view",{staticClass:"tool_center"},[i("div",{staticClass:"demo-container"},[i("div",{attrs:{id:"viewer"}})])])],1)],1)},o=[]},"63eb":function(t,e,i){"use strict";i.r(e);var a=i("6ad2"),o=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},"6ad2":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("99af"),i("14d9"),i("4de4"),i("d3b7"),i("e9c4"),i("c975"),i("159b"),i("b64b");var a=i("08fe");i("075e");var o=i("9c45");i("04e6");var r={data:function(){return{viewer:"",markersPlugin:"",itemArr:[{name:"house0",img:i("b9e7")},{name:"house1",img:i("0547")},{name:"house2",img:i("47de")},{name:"house3",img:i("7f9a")}],currentDataMark:[],dataMark:{house0:[{id:"circle0.6451949488146064-0.14126781520495002",tooltip:{content:"电梯",trigger:"click"},svgStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2},jumpIndex:2,longitude:.6451949488146064,latitude:-.14126781520495002,anchor:"center center",circle:15},{id:"circle4.865731252680243-0.1620564666367461",tooltip:{content:"公司2",trigger:"click"},svgStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2},jumpIndex:1,longitude:4.865731252680243,latitude:-.1620564666367461,anchor:"center center",circle:15},{id:"coordCenter",tooltip:{content:"中心点",trigger:"click"},svgStyle:{fill:"#fff",stroke:"#000",strokeWidth:2},longitude:2.2632520050373657,latitude:-.334226056126095,anchor:"center center",circle:10},{svgStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2},anchor:"center center",circle:8,id:"coord1",tooltip:{content:"点位1",trigger:"click"},longitude:2.2337859612521225,latitude:.7497532620159678},{svgStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2},anchor:"center center",circle:8,id:"coord2",tooltip:{content:"点位2",trigger:"click"},longitude:.7368605969192257,latitude:-.17643351603381974},{svgStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2},anchor:"center center",circle:8,id:"coord3",tooltip:{content:"点位3",trigger:"click"},longitude:3.822803879106186,latitude:-.501533928704311},{id:"coord2.23378596125212250.7497532620159678",tooltip:{content:"4m",trigger:"click"},svgStyle:{stroke:"#fff",strokeWidth:2},anchor:"center center",polylineRad:[[2.2632520050373657,-.334226056126095],[2.2337859612521225,.7497532620159678]]},{id:"coord0.7368605969192257-0.17643351603381974",tooltip:{content:"5.8m",trigger:"click"},svgStyle:{stroke:"#fff",strokeWidth:2},anchor:"center center",polylineRad:[[2.2632520050373657,-.334226056126095],[.7368605969192257,-.17643351603381974]]},{id:"coord3.822803879106186-0.501533928704311",tooltip:{content:"4.2m",trigger:"click"},svgStyle:{stroke:"#fff",strokeWidth:2},anchor:"center center",polylineRad:[[2.2632520050373657,-.334226056126095],[3.822803879106186,-.501533928704311]]}],house1:[{id:"circle6.017194505616442-0.08409694307481397",tooltip:{content:"公司1",trigger:"click"},svgStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2},jumpIndex:0,longitude:6.017194505616442,latitude:-.08409694307481397,anchor:"center center",circle:15}],house2:[{id:"circle4.489244644568847-0.038176333302873955",tooltip:{content:"公司1",trigger:"click"},svgStyle:{fill:"rgba(255, 255, 255, 1)",stroke:"rgba(0, 0, 0, 1)",strokeWidth:2},jumpIndex:0,longitude:4.489244644568847,latitude:-.038176333302873955,anchor:"center center",circle:15}]},formData:{type:"coord",points:[],longitude:0,latitude:0,fontSize:20,color:"rgba(255, 255, 255, 1)",content:"",circleSize:15,squareSize:30,backgroundColor:"rgba(255, 255, 255, 1)",strokeColor:"rgba(0, 0, 0, 1)",strokeWidth:2,tooltip:"",width:20,height:10,editId:"",coordType:"center",longitudeCenter:0,latitudeCenter:0,editCenter:"",longitude1:0,latitude1:0,tooltip1:"",edit1:"",longitude2:0,latitude2:0,tooltip2:"",edit2:"",longitude3:0,latitude3:0,tooltip3:"",edit3:"",jumpIndex:""},indexName:"",windowHeight:""}},mounted:function(){this.indexName="house0",this.currentDataMark=this.dataMark[this.indexName],this.setViewer(this.itemArr[0].img)},onReady:function(){var t=this;uni.getSystemInfo({success:function(e){t.windowHeight=e.windowHeight+"px"}})},methods:{setViewer:function(t){var e=this;if(console.log("currentDataMark",this.currentDataMark),this.viewer)try{this.viewer.destroy()}catch(n){console.log(n);var r=document.querySelector("#viewer");r.removeChild(r.childNodes[0])}this.viewer=new a.Viewer({container:document.querySelector("#viewer"),panorama:t,size:{width:"100vw",height:"100%"},useXmpData:!0,plugins:[[o.MarkersPlugin,{markers:this.currentDataMark}]],navbar:["autorotate","zoom","move","markers","caption","fullscreen"]}),this.viewer.once("ready",(function(){try{var a,o=new Image;o.src=t,o.onload=function(){a=o.height,console.log("imageHeight",a),e.markersPlugin.addMarker({id:"top-marker",longitude:"0",latitude:"90deg",width:a*Math.PI/8,height:a*Math.PI/8,imageLayer:i("c41d")}),e.markersPlugin.addMarker({id:"bottom-marker",longitude:"0",latitude:"-90deg",width:a*Math.PI/6,height:a*Math.PI/6,imageLayer:i("c41d")})}}catch(n){console.log("this.markersPlugin.markers e",n)}})),this.viewer.on("click",(function(t,i){if(console.log("e:",t),console.log("data:",i),console.log("".concat(i.rightclick?"right ":"","clicked at longitude: ").concat(i.longitude," latitude: ").concat(i.latitude)),0==i.rightclick){if("polygonRad"==e.formData.type||"polylineRad"==e.formData.type){e.formData.longitude=i.longitude,e.formData.latitude=i.latitude;var a=[];a.push(i.longitude),a.push(i.latitude),e.formData.points.push(a)}else"coord"==e.formData.type?"center"==e.formData.coordType?(e.formData.longitudeCenter=i.longitude,e.formData.latitudeCenter=i.latitude):"1"==e.formData.coordType?(e.formData.longitude1=i.longitude,e.formData.latitude1=i.latitude):"2"==e.formData.coordType?(e.formData.longitude2=i.longitude,e.formData.latitude2=i.latitude):"3"==e.formData.coordType&&(e.formData.longitude3=i.longitude,e.formData.latitude3=i.latitude):(e.formData.longitude=i.longitude,e.formData.latitude=i.latitude);e.addMarker()}})),this.showTooltip(),this.viewer.on("position-updated",(function(t,i){e.showTooltip()})),this.markersPlugin=this.viewer.getPlugin(o.MarkersPlugin);this.markersPlugin.on("select-marker",(function(t,i){if(console.log("e:",t),console.log("marker:",i),t.args[1].rightclick){if("top-marker"!=i.id&&"bottom-marker"!=i.id){e.markersPlugin.removeMarker(t.args[0].id);e.dataMark[e.indexName]=e.dataMark[e.indexName].filter((function(e){return e.id!==t.args[0].id})),e.currentDataMark=e.dataMark[e.indexName],e.formData.points=[]}}else if(console.log("e.args[0].config.jumpIndex",t.args[0].config.jumpIndex),void 0!=t.args[0].config.jumpIndex){var a=t.args[0].config.jumpIndex;e.jump(a)}}))},addMarker:function(){var t={};if("polygonRad"==this.formData.type||"polylineRad"==this.formData.type?1==this.formData.points.length&&(this.formData.editId=this.formData.type+this.formData.points[0][0]+this.formData.points[0][1]):this.formData.editId=this.formData.type+this.formData.longitude+this.formData.latitude,"text"==this.formData.type?t={id:this.formData.editId,longitude:this.formData.longitude,tooltip:this.formData.tooltip,latitude:this.formData.latitude,html:"<b>".concat(this.formData.content,"</b>"),anchor:"center center",jumpIndex:this.formData.jumpIndex,style:{color:this.formData.color,fontSize:"".concat(this.formData.fontSize,"px"),textAlign:"center"}}:"circle"==this.formData.type||"square"==this.formData.type||"rect"==this.formData.type||"ellipse"==this.formData.type?(t={id:this.formData.editId,tooltip:this.formData.tooltip,svgStyle:{fill:this.formData.backgroundColor,stroke:this.formData.strokeColor,strokeWidth:this.formData.strokeWidth},jumpIndex:this.formData.jumpIndex,longitude:this.formData.longitude,latitude:this.formData.latitude,anchor:"center center"},"circle"==this.formData.type?t["circle"]=this.formData.circleSize:"square"==this.formData.type?t["square"]=this.formData.squareSize:"rect"==this.formData.type?t["rect"]=[this.formData.width,this.formData.height]:"ellipse"==this.formData.type&&(t["ellipse"]=[this.formData.width,this.formData.height])):"polygonRad"==this.formData.type?t={id:this.formData.editId,tooltip:{content:this.formData.tooltip,className:"custom-tooltip",trigger:"click"},jumpIndex:this.formData.jumpIndex,svgStyle:{fill:this.formData.backgroundColor,stroke:this.formData.strokeColor,strokeWidth:this.formData.strokeWidth},anchor:"center center",polygonRad:this.formData.points}:"polylineRad"==this.formData.type?t={id:this.formData.editId,tooltip:{content:this.formData.tooltip,className:"custom-tooltip",trigger:"click"},svgStyle:{stroke:this.formData.strokeColor,strokeWidth:this.formData.strokeWidth},anchor:"center center",polylineRad:this.formData.points}:"coord"==this.formData.type&&("center"==this.formData.coordType?t={id:"coordCenter",tooltip:{content:"中心点",trigger:"click"},svgStyle:{fill:"#fff",stroke:"#000",strokeWidth:2},longitude:this.formData.longitudeCenter,latitude:this.formData.latitudeCenter,anchor:"center center",circle:10}:(t={svgStyle:{fill:this.formData.backgroundColor,stroke:this.formData.strokeColor,strokeWidth:this.formData.strokeWidth},anchor:"center center",circle:8},"1"==this.formData.coordType?(t["id"]="coord1",t["tooltip"]={content:"点位1",trigger:"click"},t["longitude"]=this.formData.longitude1,t["latitude"]=this.formData.latitude1):"2"==this.formData.coordType?(t["id"]="coord2",t["tooltip"]={content:"点位2",trigger:"click"},t["longitude"]=this.formData.longitude2,t["latitude"]=this.formData.latitude2):"3"==this.formData.coordType&&(t["id"]="coord3",t["tooltip"]={content:"点位3",trigger:"click"},t["longitude"]=this.formData.longitude3,t["latitude"]=this.formData.latitude3))),console.log("this.formData.points",this.formData.points),console.log("markerItem",t),"polygonRad"==this.formData.type||"polylineRad"==this.formData.type)this.formData.points.length>2?(this.markersPlugin.updateMarker(t),this.markersPlugin.markers[t.id].showTooltip()):2==this.formData.points.length&&(this.markersPlugin.addMarker(t),this.markersPlugin.markers[t.id].showTooltip());else if("coord"==this.formData.type){var e="add";"center"==this.formData.coordType?""!=this.formData.editCenter&&(e="edit"):"1"==this.formData.coordType?""!=this.formData.edit1&&(e="edit"):"2"==this.formData.coordType?""!=this.formData.edit2&&(e="edit"):"3"==this.formData.coordType&&""!=this.formData.edit3&&(e="edit"),"edit"==e?this.markersPlugin.updateMarker(t):"add"==e&&(this.markersPlugin.addMarker(t),"center"==this.formData.coordType?this.formData.editCenter="edit":"1"==this.formData.coordType?this.formData.edit1="edit":"2"==this.formData.coordType?this.formData.edit2="edit":"3"==this.formData.coordType&&(this.formData.edit3="edit")),this.markersPlugin.markers[t.id].showTooltip()}else this.markersPlugin.addMarker(t),this.markersPlugin.markers[t.id].showTooltip();this.dataMark[this.indexName].push(t),console.log("this.dataMark[this.indexName]",this.dataMark[this.indexName]),this.currentDataMark=this.dataMark[this.indexName],console.log("this.currentDataMark",this.currentDataMark),console.log("this.currentDataMark",JSON.stringify(this.currentDataMark))},typeChange:function(t){console.log("cancel"),this.cancel(),console.log("coordCancel"),this.coordCancel()},cancel:function(){var t=this;""!=this.formData.editId&&(-1==this.formData.editId.indexOf("polygonRad")&&-1==this.formData.editId.indexOf("polylineRad")||(this.markersPlugin.removeMarker(this.formData.editId),this.dataMark[this.indexName]=this.dataMark[this.indexName].filter((function(e){return e.id!==t.formData.editId})),this.currentDataMark=this.dataMark[this.indexName],this.formData.points=[],this.formData.editId=""))},confirm:function(){this.formData.points=[],this.formData.editId=""},coordCancel:function(){console.log("coordCancel"),""!=this.formData.editCenter&&(this.markersPlugin.removeMarker("coordCenter"),this.dataMark[this.indexName]=this.dataMark[this.indexName].filter((function(t){return"coordCenter"!==t.id})),this.currentDataMark=this.dataMark[this.indexName],this.formData.latitudeCenter=0,this.formData.longitudeCenter=0,this.formData.editCenter=""),""!=this.formData.edit1&&(this.markersPlugin.removeMarker("coord1"),this.dataMark[this.indexName]=this.dataMark[this.indexName].filter((function(t){return"coord1"!==t.id})),this.currentDataMark=this.dataMark[this.indexName],this.formData.latitude1=0,this.formData.longitude1=0,this.formData.edit1=""),""!=this.formData.edit2&&(this.markersPlugin.removeMarker("coord2"),this.dataMark[this.indexName]=this.dataMark[this.indexName].filter((function(t){return"coord2"!==t.id})),this.currentDataMark=this.dataMark[this.indexName],this.formData.latitude2=0,this.formData.longitude2=0,this.formData.edit2=""),""!=this.formData.edit3&&(this.markersPlugin.removeMarker("coord3"),this.dataMark[this.indexName]=this.dataMark[this.indexName].filter((function(t){return"coord3"!==t.id})),this.currentDataMark=this.dataMark[this.indexName],this.formData.latitude3=0,this.formData.longitude3=0,this.formData.edit3="")},coordConfirm:function(){if(""==this.formData.editCenter)uni.showToast({title:"没有选择中心点坐标",icon:"none"});else if(""==this.formData.edit1)uni.showToast({title:"没有选择点位1坐标",icon:"none"});else if(""==this.formData.edit2)uni.showToast({title:"没有选择点位2坐标",icon:"none"});else if(""==this.formData.edit3)uni.showToast({title:"没有选择点位3坐标",icon:"none"});else{console.log("this.formData.longitude1",this.formData.longitude1),console.log("this.formData.latitude1",this.formData.latitude1),console.log("this.formData.longitude2",this.formData.longitude2),console.log("this.formData.latitude2",this.formData.latitude2),console.log("this.formData.longitude3",this.formData.longitude3),console.log("this.formData.latitude3",this.formData.latitude3),console.log("this.formData.longitudeCenter",this.formData.longitudeCenter),console.log("this.formData.latitudeCenter",this.formData.latitudeCenter);var t={id:"coord"+this.formData.longitude1+this.formData.latitude1,tooltip:{content:this.formData.tooltip1,trigger:"click"},svgStyle:{stroke:"#fff",strokeWidth:2},anchor:"center center",polylineRad:[[this.formData.longitudeCenter,this.formData.latitudeCenter],[this.formData.longitude1,this.formData.latitude1]]};this.markersPlugin.addMarker(t),this.markersPlugin.markers[t.id].showTooltip(),this.dataMark[this.indexName].push(t),this.currentDataMark=this.dataMark[this.indexName];var e={id:"coord"+this.formData.longitude2+this.formData.latitude2,tooltip:{content:this.formData.tooltip2,trigger:"click"},svgStyle:{stroke:"#fff",strokeWidth:2},anchor:"center center",polylineRad:[[this.formData.longitudeCenter,this.formData.latitudeCenter],[this.formData.longitude2,this.formData.latitude2]]};this.markersPlugin.addMarker(e),this.markersPlugin.markers[e.id].showTooltip(),this.dataMark[this.indexName].push(e),this.currentDataMark=this.dataMark[this.indexName];var i={id:"coord"+this.formData.longitude3+this.formData.latitude3,tooltip:{content:this.formData.tooltip3,trigger:"click"},svgStyle:{stroke:"#fff",strokeWidth:2},anchor:"center center",polylineRad:[[this.formData.longitudeCenter,this.formData.latitudeCenter],[this.formData.longitude3,this.formData.latitude3]]};this.markersPlugin.addMarker(i),this.markersPlugin.markers[i.id].showTooltip(),this.dataMark[this.indexName].push(i),this.currentDataMark=this.dataMark[this.indexName],this.coordCancel()}},jump:function(t){this.markersPlugin.clearMarkers();var e=this.itemArr[t].name;this.indexName=e,this.currentDataMark=this.dataMark[e],this.setViewer(this.itemArr[t].img)},showTooltip:function(){var t=this;this.markersPlugin&&this.markersPlugin.markers&&setTimeout((function(){Object.keys(t.markersPlugin.markers).forEach((function(e){t.markersPlugin.markers[e].config.tooltip&&t.markersPlugin.markers[e].showTooltip()}))}),300)}}};e.default=r},8714:function(t,e,i){"use strict";i.r(e);var a=i("5979"),o=i("63eb");for(var r in o)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("0736");var n=i("f0c5"),s=Object(n["a"])(o["default"],a["b"],a["c"],!1,null,"3da7b14e",null,!1,a["a"],void 0);e["default"]=s.exports},"8ede":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.tool[data-v-3da7b14e]{height:100vh}.tool_center[data-v-3da7b14e]{height:100%;display:flex}.tool_center .demo-container[data-v-3da7b14e]{width:100vw;height:100%;position:relative}.tool_center .demo-container #viewer[data-v-3da7b14e]{width:100%!important}.tool_center_right[data-v-3da7b14e]{width:250px;height:100%;padding:32px 10px 0 0;background:#fff;box-sizing:border-box;border:1px solid #000}.tool_center_right_coord[data-v-3da7b14e]{display:flex;align-items:center;justify-content:space-between}.tool_center_right_coord_body[data-v-3da7b14e]{width:100px}.tool_center_right_coord_body_item[data-v-3da7b14e]{line-height:25px;width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tool_center_right_coordBox[data-v-3da7b14e]{margin-bottom:20px}.tool_center_right_button[data-v-3da7b14e]{width:100%;display:flex;align-items:center;justify-content:right;margin-bottom:5px;margin-right:20px}.tool_bottom[data-v-3da7b14e]{height:200px;background-color:#fff;white-space:nowrap;width:100%}.tool_bottom_box[data-v-3da7b14e]{height:150px;display:flex;align-items:center}.tool_bottom_box_item[data-v-3da7b14e]{display:flex;flex-direction:column;align-items:center;margin:0 16px}.tool_bottom_box_item_top[data-v-3da7b14e]{width:240px;height:120px}',""]),t.exports=e},b782:function(t,e,i){var a=i("8ede");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("19b57ef2",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-miniGame-index"],{"065a":function(t,e,o){"use strict";o("7a82");var i=o("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(o("dc79")),s={components:{puzzle:n.default},data:function(){return{level:0,puzzleConfig:[{img:"https://s3.bmp.ovh/imgs/2023/09/13/ccedc86c124af74b.jpg",row:3,col:3},{img:"https://s3.bmp.ovh/imgs/2023/09/13/6447e311b10cd6e8.jpg",row:4,col:4},{img:"https://s3.bmp.ovh/imgs/2023/09/13/ccedc86c124af74b.jpg",row:5,col:5},{img:"https://s3.bmp.ovh/imgs/2023/09/13/6447e311b10cd6e8.jpg",row:6,col:6},{img:"https://s3.bmp.ovh/imgs/2023/09/13/ccedc86c124af74b.jpg",row:7,col:7}],status:"进行中......"}},methods:{handleNext:function(){if(console.log("next"),this.status=this.$refs.dpuzzle.status,this.level++,this.level==this.puzzleConfig.length-1){var t=window.confirm("已经是最后一关了，需要重新开始么？");t&&(this.level=0)}},getStatus:function(){this.status=this.$refs.dpuzzle.status}}};e.default=s},"154c":function(t,e,o){"use strict";o.r(e);var i=o("065a"),n=o.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"1bcf":function(t,e,o){"use strict";o("7a82");var i=o("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(o("2909"));o("a9e3"),o("14d9"),o("e9c4"),o("b65f"),o("acd8");var s={props:{img:{type:String,required:!0},row:{type:Number,default:3},col:{type:Number,default:3}},data:function(){return{status:{type:String,default:"进行中......"},aspectRatio:1,width:750,height:750,blank:{left:2,right:2},blockPoints:[],correctPoints:[],blockWidth:"",blockHeight:""}},mounted:function(){},methods:{calculateAspectRatio:function(){var t=this;console.log("calculateAspectRatio");var e=this.$refs.myImage;if(e){this.aspectRatio=e.naturalWidth/e.naturalHeight,this.height=this.width/this.aspectRatio,console.log("this.aspectRatio",this.aspectRatio),this.blockWidth=this.width/this.col,this.blockHeight=this.height/this.row;for(var o=this.row,i=this.col,s=this.blockWidth,r=this.blockHeight,c=[],a=1,l=0;l<o;l++)for(var u=0;u<i;u++)c.push({x:u*s,y:l*r,widthX:u*s,heightY:l*r,id:(new Date).getTime()+100*Math.random(),number:a}),a++;this.correctPoints=c;var h=this.correctPoints,d=h.length,f=h[d-1],b=(0,n.default)(h);b.length=d-1,b.push(f),this.blockPoints=b,this.$nextTick((function(){for(var e=0;e<t.row*t.col;e++){var o=JSON.parse(JSON.stringify(t.blockPoints[t.blockPoints.length-1]));console.log("offset.number",o.number);var i=[],n=o.number-t.col;n>0&&n!=o.topNumber&&i.push(n);var s=o.number+t.col;s<=t.blockPoints.length&&s!=o.topNumber&&i.push(s);var r=o.number-1;o.number%t.col!=1&&r!=o.topNumber&&i.push(r);var c=o.number+1;o.number%t.col!=0&&c!=o.topNumber&&i.push(c),console.log("numberArray",i);var a=Math.floor(Math.random()*i.length);console.log("number",a);var l=i[a]-1;console.log("clickNumber",l),t.handleClick(l)}}))}},handleClick:function(t){var e=this.blockPoints[this.blockPoints.length-1];if(this.isAdjacent(this.blockPoints[t],e)){var o=JSON.parse(JSON.stringify(this.blockPoints[this.blockPoints.length-1])),i=o.x,n=o.y,s=o.number;this.blockPoints[this.blockPoints.length-1].x=this.blockPoints[t].x,this.blockPoints[this.blockPoints.length-1].y=this.blockPoints[t].y,this.blockPoints[this.blockPoints.length-1].number=this.blockPoints[t].number,this.blockPoints[this.blockPoints.length-1]["lastNumber"]=s,this.blockPoints[t].x=i,this.blockPoints[t].y=n,this.blockPoints[t].number=s,console.log("this.blockPoints[(this.blockPoints.length - 1)]",this.blockPoints[this.blockPoints.length-1].x,this.blockPoints[this.blockPoints.length-1].y);var r=this.winCheck();r&&this.winGame()}},isAdjacent:function(t,e){var o=t.x,i=t.y,n=e.x,s=e.y,r=this.blockWidth,c=this.blockHeight,a=Math.floor(Math.abs(Math.trunc(parseFloat(o/r))-Math.trunc(parseFloat(n/r)))),l=Math.floor(Math.abs(Math.trunc(parseFloat(i/c))-Math.trunc(parseFloat(s/c)))),u=!1;return console.log("yDis",l),console.log("xDis",a),0==l?0==a?u=!1:1==a&&(u=!0):u=1==l&&0==a,console.log("flag",u),u},winCheck:function(){for(var t in this.correctPoints){if(this.blockPoints[t].x!=this.correctPoints[t].widthX)return!1;if(this.blockPoints[t].y!=this.correctPoints[t].heightY)return!1}return!0},winGame:function(){var t=this;setTimeout((function(){t.status="胜利",alert("恭喜通关"),t.blockPoints[t.blockPoints.length-1].opacity=1,t.$emit("getStatus"),setTimeout((function(){t.goToNextLevel()}),300)}),300)},goToNextLevel:function(){var t=window.confirm("现在进行下一关么？");t&&(this.status="进行中......",this.$emit("next"))}},computed:{}};e.default=s},2909:function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)||(0,n.default)(t)||(0,s.default)(t)||(0,r.default)()};var i=c(o("6005")),n=c(o("db90")),s=c(o("06c5")),r=c(o("3427"));function c(t){return t&&t.__esModule?t:{default:t}}},3427:function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},o("d9e2"),o("d401")},"4cc2":function(t,e,o){"use strict";o.r(e);var i=o("ef6d"),n=o("154c");for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);var r=o("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"2cfea54a",null,!1,i["a"],void 0);e["default"]=c.exports},6005:function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,i.default)(t)};var i=function(t){return t&&t.__esModule?t:{default:t}}(o("6b75"))},"66ba":function(t,e,o){"use strict";var i=o("dd86"),n=o.n(i);n.a},a83d:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"puzzle",style:{width:t.width+"rpx",height:t.height+"rpx"}},[t._l(t.blockPoints,(function(e,i){return o("div",{key:e.id,ref:i===t.blockPoints.length-1?"empty":"block",refInFor:!0,staticClass:"puzzle__block",style:{width:t.blockWidth+"rpx",height:t.blockHeight+"rpx",left:e.x+"rpx",top:e.y+"rpx",backgroundImage:"url("+t.img+")",backgroundPosition:"-"+t.correctPoints[i].widthX+"rpx -"+t.correctPoints[i].heightY+"rpx",backgroundSize:t.col+"00% "+t.row+"00%",opacity:i===t.blockPoints.length-1&&0},attrs:{id:"id"+i,"data-correctX":t.correctPoints[i].x,"data-correctY":t.correctPoints[i].y},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.handleClick(i)}}})})),o("img",{ref:"myImage",staticClass:"puzzle_image",attrs:{src:t.img},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.calculateAspectRatio.apply(void 0,arguments)}}})],2)},n=[]},b65f:function(t,e,o){var i=o("23e7"),n=o("b42e");i({target:"Math",stat:!0},{trunc:n})},cfb7:function(t,e,o){"use strict";o.r(e);var i=o("1bcf"),n=o.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},d0fd:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".puzzle[data-v-35cffe2c]{box-sizing:initial;border:2px solid #ccc;position:relative}.puzzle__block[data-v-35cffe2c]{border:1px solid #fff;box-sizing:border-box;\n\t/* background-color: rebeccapurple; */position:absolute;transition:all .3s}.puzzle_image[data-v-35cffe2c]{display:none}",""]),t.exports=e},db90:function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},o("a4d3"),o("e01a"),o("d3b7"),o("d28b"),o("3ca3"),o("ddb0"),o("a630")},dc79:function(t,e,o){"use strict";o.r(e);var i=o("a83d"),n=o("cfb7");for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);o("66ba");var r=o("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"35cffe2c",null,!1,i["a"],void 0);e["default"]=c.exports},dd86:function(t,e,o){var i=o("d0fd");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=o("4f06").default;n("90bed360",i,!0,{sourceMap:!1,shadowMode:!1})},ef6d:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h3",[t._v("[拼图游戏]当前是第"+t._s(t.level+1)+"关,当前状态["+t._s(t.status)+"]")]),o("puzzle",t._b({ref:"dpuzzle",on:{getStatus:function(e){arguments[0]=e=t.$handleEvent(e),t.getStatus.apply(void 0,arguments)},next:function(e){arguments[0]=e=t.$handleEvent(e),t.handleNext.apply(void 0,arguments)}}},"puzzle",t.puzzleConfig[t.level],!1))],1)},n=[]}}]);